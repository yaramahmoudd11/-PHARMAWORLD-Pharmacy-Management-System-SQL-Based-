CREATE DATABASE PHARMAWORLDT03;
USE PHARMAWORLDT03;

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE company_info
(
	Cname				NVARCHAR(30) UNIQUE NOT NULL,
	Adress				NVARCHAR(200) NOT NULL,
	C_owner				NVARCHAR(100) NOT NULL,
	Finance				INT,
	Cdate				DATE,
	Contact				INT,
	Email				NVARCHAR(50),
	PRIMARY KEY (Cname)
);
INSERT INTO company_info (Cname, Adress, C_owner, Finance, Cdate, Contact, Email) 
values (N'فارما ورلد', N'شارع سعيد، طنطا', N'علي محمد', 1500000, N'2017-03-20', N'01011223344', N'ali.mohamed@elmanara.com');

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE Department
(
	ID					INT UNIQUE NOT NULL,
	DName				NVARCHAR(100) NOT NULL,
	salary				INT,
	PRIMARY KEY (ID)
);
INSERT INTO Department (ID, DName, salary) VALUES
('50101', N'الإدارة', 15000), --- Manager
('50102', N'المبيعات', 12000), --- Transactions
('50106', N'الماليلات', 11000), --- FinancialInfo
('50108', N'المنتجات', 10500), --- Products
('5111', N'مناديب المبيعات ', 3000); --- SalesAgent

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE empolyee
(
    ID                  INT UNIQUE NOT NULL,
    FName               NVARCHAR(100) NOT NULL,
    LName               NVARCHAR(100) NOT NULL,
    Password            NVARCHAR(100) NOT NULL,
    age                 INT,
    gender              NVARCHAR(2),
    Workingdays         INT,
    Workinghours        INT,
    bonus               INT,
    Email               NVARCHAR(50),
    phonenumber         INT NOT NULL,
    EAddress            NVARCHAR(100),
    DID                 INT,
    PRIMARY KEY (ID),
    FOREIGN KEY(DID) REFERENCES Department
        ON DELETE SET NULL
        ON UPDATE CASCADE,
    CHECK (Password LIKE '%[A-Z]%' AND    -- At least one uppercase
           Password LIKE '%[a-z]%' AND    -- At least one lowercase
           Password LIKE '%[0-9]%' AND    -- At least one digit
           Password LIKE '%[!@#$%^&*()]%' AND -- At least one special character
           LEN(Password) >= 8)            -- Minimum length
);
INSERT INTO empolyee (ID, FName, LName, Password, age, gender, Workingdays, Workinghours, bonus, Email, phonenumber, EAddress, DID) VALUES
('40101', N'أحمد', N'حسن', 'Pass@123', 30, 'M', 22, 160, 1000, N'ahmed.hassan@pharmaworld.com', 20156701, N'طنطا، شارع النيل', '50101'),
('40102', N'سارة', N'علي', 'Sara@789', 27, 'F', 20, 140, 800, 'sara.ali@pharmaworld.com', 20156702, N'طنطا، شارع الهرم', '50102'),
('40103', N'عمر', N'عبدالله', 'Omar#456', 35, 'M', 25, 180, 1200, 'omar.abdullah@pharmaworld.com', 20123403, N'طنطا، شارع الكورنيش', '50102'),
('40104', N'نور', N'إبراهيم', 'Nor@6789', 29, 'F', 22, 160, 1000, 'nor.ibrahim@pharmaworld.com', 20456704, N'طنطا، مدينة نصر', '50102'),
('40105', N'ياسين', N'محمد', 'Yass!234', 33, 'M', 24, 170, 900, 'yassin.mohamed@pharmaworld.com', 2056705, N'طنطا، شارع الجيش', '50102'),
('40106', N'مروة', N'عبدالله', 'Marw@567', 28, 'F', 20, 150, 800, 'marwa.abdullah@pharmaworld.com', 2015606, N'طنطا، شارع الهلالي', '50106'),
('40107', N'إبراهيم', N'سعيد', 'Ibra@789', 40, 'M', 23, 160, 1100, 'ibrahim.saeed@pharmaworld.com', 2016707, N'طنطا، مصر الجديدة', '50102'),
('40108', N'هبة', N'عادل', 'Hiba@123', 25, 'F', 20, 130, 700, 'hiba.adel@pharmaworld.com', 2012348, N'طنطا ، شرق النيل', '50106'),
('40109', N'محمد', N'سمير', 'Mohd#456', 31, 'M', 23, 150, 950, 'mohamed.samir@pharmaworld.com', 20456709, N'طنطا، شارع الثورة', '50106'),
('40110', N'ندى', N'عبدالرحيم', 'Nada@789', 26, 'F', 21, 140, 750, 'nada.abdulrahim@pharmaworld.com', 2456710, N'طنطا، شارع الجيش', '50106'),
('40111', N'علي', N'عمر', 'Ali!2345', 32, 'M', 24, 170, 1000, 'ali.omar@pharmaworld.com', 2056711, N'طنطا، شارع القصر العيني', '50106'),
('40112', N'هدى', N'محمد', 'Hoda#567', 29, 'F', 20, 150, 900, 'hoda.mohamed@pharmaworld.com', 20156712, N'طنطا، حي السلام', '50102'),
('40113', N'حسن', N'سامي', 'Hass!890', 36, 'M', 26, 190, 1300, 'hassan.samy@pharmaworld.com', 20156713, N'طنطا، شارع بورسعيد', '50108'),
('40114', N'لبنى', N'مجدي', 'Lobn@123', 27, 'F', 21, 140, 850, 'lobna.magdy@pharmaworld.com', 2345714, N'طنطا، شارع الجامعة', '50106'),
('40115', N'خالد', N'إبراهيم', 'Khal#456', 34, 'M', 23, 160, 1050, 'khaled.ibrahim@pharmaworld.com', 2012715, N'طنطا، شارع المحطة', '50108'),
('40116', N'ريهام', N'عبدالله', 'Rih@7890', 31, 'F', 20, 145, 800, 'riham.abdullah@pharmaworld.com', 2056716, N'طنطا، شارع السوق', '50108'),
('40117', N'عبدالله', N'منصور', 'Abd!1234', 37, 'M', 25, 185, 1400, 'abdullah.mansour@pharmaworld.com', 2456717, N'طنطا، حي الكرنك', '50108'),
('40118', N'ياسمين', N'سعيد', 'Yasm@456', 28, 'F', 22, 160, 950, 'yasmin.saeed@pharmaworld.com', 2056718, N'طنطا، شارع البحر الأعظم', '50108'),
('40119', N'طارق', N'حسن', 'Tare!678', 33, 'M', 24, 175, 1100, 'tarek.hassan@pharmaworld.com', 201456719, N'طنطا، شارع القومية', '50108'),
('40120', N'منى', N'عادل', 'Mona@890', 26, 'F', 20, 140, 750, 'mona.adel@pharmaworld.com', 20123720, N' طنطا، شارع الجمهورية', '5111'),
('40121', N'رائد', N'خالد', 'Rae#2345', 28, 'M', 22, 160, 1000, 'raed.khaled@pharmaworld.com', 20156721, N'طنطا، شارع الجيش', '5111'),
('40122',N'شيماء', N'جمال', 'Shai@4567', 30, 'F', 23, 170, 1050, 'shaimaa.gamal@pharmaworld.com', 20156722, N'طنطا، حي السلام', '5111'),
('40123', N'محمود', N'إبراهيم','Mahmoud@123', 33, 'M', 20, 140, 800, 'mahmoud.ibrahim@pharmaworld.com', 20156723, N'طنطا، شارع الثورة', '5111'),
('40124', N'فاطمة', N'أحمد', 'Fat!4567',26, 'F', 21, 150, 900, 'fatma.ahmed@pharmaworld.com', 20156724, N'طنطا، شارع القصر العيني', '5111'),
('40125', N'كمال', N'سعيد','Kam#5555', 35, 'M', 24, 160, 1100, 'kamal.saeed@pharmaworld.com', 20156725, N'طنطا، شارع بورسعيد', '5111');

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE Daysoff
(
	ID					INT UNIQUE NOT NULL,
	EID					INT NOT NULL,
	REASON				NVARCHAR(150),
	Ddate				DATE,
	Dstate				NVARCHAR(50),
	enddate				DATE NOT NULL,
	PRIMARY KEY (ID, EID),
	FOREIGN KEY(EID) REFERENCES empolyee
		ON DELETE CASCADE
		ON UPDATE CASCADE
);
INSERT INTO Daysoff (ID, EID, REASON, Ddate, Dstate, enddate) VALUES
(1, 40102, N'إجازة مرضية', '2024-11-01', N'موافقة', '2024-11-05'),
(2, 40104, N'إجازة سنوية', '2024-11-10', N'موافقة', '2024-11-14'),
(3, 40112, N'إجازة مرضية', '2024-11-15', N'موافقة', '2024-11-18'),
(4, 40120, N'إجازة سنوية', '2024-11-20', N'موافقة', '2024-11-25'),
(5, 40116, N'إجازة غير مدفوعة', '2024-11-28', N'موافقة', '2024-11-30'),
(6, 40121, N'إجازة مرضية', '2024-11-01', N'طلب', '2024-11-05'),
(7, 40116, N'إجازة سنوية', '2024-11-10', N'طلب', '2024-11-14'),
(8, 40107, N'إجازة مرضية', '2024-11-15', N'طلب', '2024-11-18'),
(9, 40120, N'إجازة سنوية', '2024-11-20', N'طلب', '2024-11-25'),
(10, 40125, N'إجازة غير مدفوعة', '2024-11-28', N'طلب', '2024-11-30');

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE products
(
	ID					INT UNIQUE NOT NULL,
	pname				NVARCHAR(100) NOT NULL,
	ptype				NVARCHAR(50),
	descrep				NVARCHAR(100),
	PRIMARY KEY (ID)
);
INSERT INTO products (ID, pname, ptype, descrep) VALUES
(30101, N'لقاح الحمى القلاعية', N'لقاح بيطري', N'لقاح للماشية ضد الحمى القلاعية'),
(30102, N'دواء طارد للديدان', N'دواء بيطري', N'دواء فعال للقضاء على الديدان الداخلية'),
(30103, N'مطهر جراحي', N'مستلزمات طبية', N'مطهر للاستخدام في العمليات الجراحية'),
(30104, N'فيتامينات حيوانية', N'مكمل غذائي', N'مكمل غذائي للماشية والدواجن'),
(30105, N'مضاد حيوي بيطري', N'دواء بيطري', N'مضاد حيوي واسع الطيف'),
(30106, N'لقاح النيوكاسل', N'لقاح بيطري', N'لقاح للطيور ضد مرض النيوكاسل'),
(30107, N'مطهر الكلورهيكسيدين', N'مستلزمات طبية', N'مطهر للاستخدام البيطري العام'),
(30108, N'أوكسي تتراسايكلين', N'مضاد حيوي', N'مضاد حيوي طويل المفعول للماشية'),
(30109, N'فيتامين C للطيور', N'مكمل غذائي', N'يدعم صحة الطيور ومناعة الجسم'),
(30110, N'علاج الجرب للماشية', N'دواء بيطري', N'علاج فعال للجرب والطفيليات الخارجية'),
(30111, N'مطهر اليود', N'مستلزمات طبية', N'مطهر يستخدم للتعقيم في العمليات البيطرية'),
(30112, N'مكمل غذائي للدواجن', N'مكمل غذائي', N'يحسن من إنتاج البيض وصحة الدواجن'),
(30113, N'علاج القراد', N'دواء بيطري', N'علاج فعال للقضاء على القراد في الماشية'),
(30114, N'مضاد طفيليات', N'دواء بيطري', N'علاج شامل للقضاء على الطفيليات الداخلية والخارجية'),
(30115, N'فيتامين B للماشية', N'مكمل غذائي', N'يساهم في تحسين النمو والإنتاج'),
(30116, N'مطهر البوفيدون', N'مستلزمات طبية', N'مطهر فعال للاستخدامات البيطرية'),
(30117, N'مضاد حيوي طويل المدى', N'دواء بيطري', N'مضاد حيوي قوي للمواشي'),
(30118, N'لقاح السعار', N'لقاح بيطري', N'لقاح للمواشي والكلاب ضد داء الكلب'),
(30119, N'مكمل غذائي للدواجن', N'مكمل غذائي', N'يزيد من مقاومة الطيور للأمراض'),
(30120, N'مضاد التهاب بيطري', N'دواء بيطري', N'يستخدم لعلاج الالتهابات البكتيرية والفيروسية'),
(30121, N'مضاد حيوي بيطري للجروح', N'دواء بيطري', N'مضاد حيوي لعلاج الجروح'),
(30122, N'مكمل غذائي للدواجن', N'مكمل غذائي', N'مكمل غذائي لتحسين الإنتاج'),
(30123, N'دواء لعلاج الديدان', N'دواء بيطري', N'دواء للقضاء على الديدان الداخلية'),
(30124, N'لقاح للماشية', N'لقاح بيطري', N'لقاح فعال ضد الأمراض'),
(30125, N'فيتامينات للطيور', N'مكمل غذائي', N'مكمل غذائي يعزز الصحة العامة للطيور'),
(30126, N'دواء طارد للبكتيريا', N'دواء بيطري', N'دواء للقضاء على البكتيريا في الحيوانات'),
(30127, N'مطهر جراحي للماشية', N'مستلزمات طبية', N'مطهر فعال للاستخدام الجراحي'),
(30128, N'علاج للقراد', N'دواء بيطري', N'علاج للقضاء على القراد'),
(30129, N'مضاد طفيليات للدواجن', N'دواء بيطري', N'علاج شامل للطفيليات الداخلية والخارجية'),
(30130, N'فيتامين C للطيور', N'مكمل غذائي', N'فيتامين يعزز المناعة للطيران');

----------------------------------------------------------------------------------------------------------------------------------------------
CREATE TABLE Stock
(
	PID					INT NOT NULL,
	sellprice			INT NOT NULL,
	buyprice			INT NOT NULL,
	expdate				DATE,
	amount				INT NOT NULL,
	PRIMARY KEY (PID, sellprice,buyprice),
	FOREIGN KEY(PID) REFERENCES products
		ON DELETE CASCADE
);
INSERT INTO Stock (PID, sellprice, buyprice, expdate, amount) VALUES
(30101, 550, 500, '2025-12-31', 100),
(30102, 150, 100, '2025-06-30', 200),
(30103, 250, 200, '2024-12-31', 150),
(30104, 100, 50, '2024-11-30', 300),
(30105, 350, 300, '2025-07-15', 100),
(30106, 450, 400, '2025-09-01', 120),
(30107, 200, 150, '2024-10-01', 200),
(30108, 300, 250, '2025-03-15', 250),
(30109, 100, 50, '2024-08-01', 500),
(30110, 250, 200, '2025-04-10', 150),
(30111, 180, 120, '2024-12-15', 180),
(30112, 120, 70, '2025-01-31', 300),
(30113, 200, 150, '2024-07-01', 100),
(30114, 300, 250, '2025-05-31', 180),
(30115, 90, 40, '2024-09-15', 400),
(30116, 140, 90, '2025-02-28', 200),
(30117, 550, 500, '2024-10-20', 80),
(30118, 650, 600, '2025-08-31', 60),
(30119, 100, 50, '2024-09-30', 500),
(30120, 350, 300, '2025-06-15', 200),
(30121, 180,100, '2024-11-30',200),
(30122, 120,80, '2024-12-15',350),
(30123, 180,120, '2024-12-20',130),
(30124, 300,200, '2024-11-15',180),
(30125, 200,150, '2025-01-10',220),
(30126, 150,90, '2024-12-05',160),
(30127, 250,220, '2024-11-25',100),
(30128, 210,170, '2024-11-10',100),
(30129, 350,250, '2024-12-25',80),
(30130, 100,60, '2025-02-01',300);

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE clients
(
	ID					INT UNIQUE NOT NULL,
	cname				NVARCHAR(15) NOT NULL,
	loction				NVARCHAR(50),
	financestatus		INT NOT NULL,
	sell_buy			NVARCHAR(50),
	contacts			INT,
	Cowner				NVARCHAR(50),
	PRIMARY KEY (ID)
);
INSERT INTO clients (ID, cname, loction, financestatus, sell_buy, contacts, Cowner) VALUES
(101, N'شركة القاهرة', N'القاهرة', 1, N'بيع', 123456789, N'أحمد علي'),
(102, N'شركة الإسكندرية', N'الإسكندرية', 2, N'شراء', 987654321, N'فاطمة محمود'),
(103, N'شركة الجيزة', N'الجيزة', 3, N'بيع', 555888777, N'محمد السيد'),
(104, N'شركة الشرقية', N'الشرقية', 1, N'شراء', 666999000, N'حسن محمود'),
(105, N'شركة الدقهلية', N'الدقهلية', 2, N'بيع', 444555666, N'سارة سمير'),
(106, N'شركة أسيوط', N'أسيوط', 1, N'شراء', 333222111, N'إبراهيم أحمد'),
(107, N'شركة المنيا',N'المنيا', 3, N'بيع', 222111333, N'يوسف سعيد'),
(108, N'شركة سوهاج', N'سوهاج', 2, N'شراء', 111000444, N'هالة جمال'),
(109, N'شركة بني سويف', N'بني سويف', 1, N'بيع', 888777666, N'عادل محمد'),
(110, N'شركة الفيوم', N'الفيوم', 2, N'شراء', 999111222, N'ليلى حسن');

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE transactions
(
	ID					INT UNIQUE,
	tdate				DATE NOT NULL,
	amount				INT,
	salesID				INT,
	PID					INT,
	CID					INT,
	sell_buy			NVARCHAR(50),
	payment				NVARCHAR(15) NOT NULL,
	price				INT NOT NULL,
	Paid_amount         INT,
	remainder           INT,
	PRIMARY KEY (ID),
	FOREIGN KEY(salesID) REFERENCES empolyee
		ON DELETE SET NULL
		ON UPDATE CASCADE,
	FOREIGN KEY(PID) REFERENCES products
		ON DELETE SET NULL
		ON UPDATE CASCADE,
	FOREIGN KEY(CID) REFERENCES clients
		ON DELETE SET NULL
		ON UPDATE CASCADE
);
INSERT INTO transactions (ID, tdate, amount, salesID, PID, CID, sell_buy, payment, price, Paid_amount, remainder) 
VALUES
('20101', '2024-11-01', 120, '40121', '30101', '101', N'بيع', N'شيك', 750, 750, 0),
('20102', '2024-11-02', 100, '40122', '30103', '102', N'شراء', N'كاش', 300, 300, 0),
('20103', '2024-11-03', 150, '40123', '30105', '103', N'بيع', N'تحويل بنكي', 450, 450, 0),
('20104', '2024-11-04', 250, '40124', '30107', '104', N'شراء', N'شيك', 220, 220, 0),
('20105', '2024-11-05', 80, '40125', '30108', '105', N'بيع', N'كاش', 380, 380, 0),
('20106', '2024-11-06', 180, '40121', '30109', '106', N'شراء', N'بطاقة ائتمانية', 50, 50, 0),
('20107', '2024-11-07', 130, '40122', '30102', '107', N'بيع', N'تحويل بنكي', 150, 150, 0),
('20108', '2024-11-08', 90, '40123', '30106', '108', N'شراء', N'كاش', 600, 600, 0),
('20109', '2024-11-09', 50, '40124', '30104', '109', N'بيع', N'بطاقة ائتمانية', 80, 80, 0),
('20110', '2024-11-10', 200, '40125', '30110', '110', N'شراء', N'تحويل بنكي', 250, 250, 0),
('20111', '2024-11-11', 180, '40121', '30103', '101', N'بيع', N'كاش', 300, 300, 0),
('20112', '2024-11-12', 250, '40122', '30101', '102', N'شراء', N'تحويل بنكي', 750, 750, 0),
('20113', '2024-11-13', 120, '40123', '30105', '103', N'بيع', N'بطاقة ائتمانية', 450, 450, 0),
('20114', '2024-11-14', 150, '40124', '30102', '104', N'شراء', N'كاش', 150, 150, 0),
('20115', '2024-11-15', 100, '40125', '30108', '105', N'بيع', N'تحويل بنكي', 380, 380, 0),
('20116', '2024-11-16', 200, '40121', '30106', '106', N'شراء', N'شيك', 50, 50, 0),
('20117', '2024-11-17', 250, '40122', '30107', '107', N'بيع', N'كاش', 220, 220, 0),
('20118', '2024-11-18', 150, '40123', '30109', '108', N'شراء', N'تحويل بنكي', 50, 50, 0),
('20119', '2024-11-19', 90, '40124', '30104', '109', N'بيع', N'بطاقة ائتمانية', 80, 80, 0),
('20120', '2024-11-20', 80, '40125', '30110', '110', N'شراء', N'كاش', 250, 250, 0),
('20121', '2024-11-21', 250, '40121', '30101', '101', N'بيع', N'تحويل بنكي', 750, 750, 0),
('20122', '2024-11-22', 150, '40122', '30102', '102', N'شراء', N'كاش', 150, 150, 0),
('20123', '2024-11-23', 100, '40123', '30103', '103', N'بيع', N'بطاقة ائتمانية', 300, 300, 0),
('20124', '2024-11-24', 180, '40124', '30104', '104', N'شراء', N'تحويل بنكي', 80, 80, 0),
('20125', '2024-11-25', 200, '40125', '30105', '105', N'بيع', N'كاش', 450, 450, 0),
('20126', '2024-11-26', 90, '40121', '30106', '106', N'شراء', N'تحويل بنكي', 50, 50, 0),
('20127', '2024-11-27', 250, '40122', '30107', '107', N'بيع', N'شيك', 220, 220, 0),
('20128', '2024-11-28', 150, '40123', '30108', '108', N'شراء', N'كاش', 380, 380, 0),
('20129', '2024-11-29', 120, '40124', '30109', '109', N'بيع', N'تحويل بنكي', 50, 50, 0),
('20130', '2024-11-30', 100, '40125', '30110', '110', N'شراء', N'كاش', 250, 250, 0),
('20131', '2024-11-30', 250, '40121', '30103', '101', N'بيع', N'بطاقة ائتمانية', 300, 300, 0),
('20132', '2024-11-30', 180, '40121', '30106', '101', N'شراء', N'كاش', 50, 50, 0),
('20133', '2024-11-30', 120, '40122', '30104', '102', N'بيع', N'تحويل بنكي', 150, 150, 0),
('20134', '2024-11-30', 200, '40122', '30107', '102', N'شراء', N'شيك', 220, 220, 0);

----------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE FINANCIAL_INFO
(
	ID					INT UNIQUE NOT NULL,
	CID				    INT ,
	Amount			    INT,
	STATUSf   			NVARCHAR(50),
	PRIMARY KEY (ID), 
	FOREIGN KEY(CID) REFERENCES clients
		ON DELETE SET NULL
		ON UPDATE CASCADE
);
INSERT INTO FINANCIAL_INFO (ID, CID, Amount, STATUSf) VALUES
('30101', '101', 1200, N'دين'),
('30102', '102', 1500, N'ائتمان'),
('30103', '103', 1800, N'دين'),
('30104', '104', 2000, N'ائتمان'),
('30105', '105', 2500, N'دين'),
('30106', '106', 3000, N'ائتمان'),
('30107', '107', 3500, N'دين'),
('30108', '108', 4000, N'ائتمان'),
('30109', '109', 4500, N'دين'),
('30110', '110', 5000, N'ائتمان'),
('30111', '101', 5500, N'دين'),
('30112', '102', 6000, N'ائتمان'),
('30113', '103', 6500, N'دين'),
('30114', '104', 7000, N'ائتمان'),
('30115', '105', 7500, N'دين'),
('30116', '106', 8000, N'ائتمان'),
('30117', '107', 8500, N'دين'),
('30118', '108', 9000, N'ائتمان'),
('30119', '109', 9500, N'دين'),
('30120', '110', 10000, N'ائتمان');
